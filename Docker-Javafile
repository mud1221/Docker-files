FROM maven:3.9.11-eclipse-temurin-17-alpine AS build
ADD . /appjava
WORKDIR /appjava
RUN mvn clean package
FROM eclipse-temurin:25_36-jdk AS runtime
LABEL project="java project"
LABEL author="devopsteam"
ENV project=prod
ARG myownuser=mudasir
ARG homedir=/usr/share/mudasir
RUN useradd -m -d ${homedir} -s /bin/sh ${myownuser}
USER ${myownuser}
COPY --from=build /appjava/target/*.jar /devops/mud.jar
WORKDIR /devops
EXPOSE 8080 
CMD ["java","-jar","mud.jar"]

